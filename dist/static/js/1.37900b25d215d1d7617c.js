webpackJsonp([1],{"LQ8+":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("section",{staticClass:"chat-box"},[a("div",{ref:"chatbox",staticClass:"chat-box-list-container"},[a("ul",{staticClass:"chat-box-list"},t._l(t.messages,function(e,n){return a("li",{key:n,staticClass:"message",class:e.author},[a("div",{directives:[{name:"show",rawName:"v-show",value:null==e.image,expression:"(message.image==null)"}]},[a("span",{directives:[{name:"show",rawName:"v-show",value:!(null==e.text),expression:"!(message.text==null)"}]},[t._v(t._s(e.text))])]),t._v(" "),a("img",{directives:[{name:"show",rawName:"v-show",value:!(null==e.image),expression:"!(message.image==null)"}],staticStyle:{width:"65%"},attrs:{id:n,src:e.image,alt:"image"}})])}),0)]),t._v(" "),a("div",{staticClass:"chat-inputs"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],attrs:{type:"text"},domProps:{value:t.message},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendMessage.apply(null,arguments)},input:function(e){e.target.composing||(t.message=e.target.value)}}}),t._v(" "),a("button",{on:{click:t.sendMessage}},[t._v("Send")])])]),t._v(" "),a("button",{staticClass:"restart",on:{click:t.restart}},[t._v("restart")]),t._v(" "),a("input",{staticClass:"file",attrs:{name:"file",type:"file",accept:"image/png,image/gif,image/jpeg"},on:{change:t.upload}})])},o=[],i={render:n,staticRenderFns:o};e.a=i},OS4I:function(t,e,a){e=t.exports=a("FZ+f")(!0),e.push([t.i,".chat-box-list[data-v-18aff33d],.chat-box[data-v-18aff33d]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;list-style-type:none}.chat-box-list-container[data-v-18aff33d]{overflow-y:auto;scroll-behavior:smooth}.chat-box[data-v-18aff33d]{width:50%;height:80vh;border:1px solid #999;border-radius:4px;margin-left:10%;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.chat-box-list[data-v-18aff33d]{margin-top:1rem;padding-left:1rem;padding-right:1rem;text-align:left}.chat-box-list li[data-v-18aff33d]{padding:.3rem;color:#fff}.chat-box-list div[data-v-18aff33d]{display:-webkit-box;display:-ms-flexbox;display:flex;width:auto;height:auto;padding:.5rem;max-width:80%;min-width:0}.chat-box-list .server div[data-v-18aff33d]{float:left;background:green;border-radius:4px}.chat-box-list .server img[data-v-18aff33d]{float:right}.chat-box-list .client div[data-v-18aff33d]{float:right;-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse;background:blue;border-radius:4px}.chat-box-list .client img[data-v-18aff33d]{float:right}.chat-inputs[data-v-18aff33d]{display:-webkit-box;display:-ms-flexbox;display:flex}.chat-inputs input[data-v-18aff33d]{line-height:3;width:100%;border:1px solid #999;border-left:none;border-bottom:none;border-right:none;border-bottom-left-radius:4px;padding-left:1.5rem}.chat-inputs button[data-v-18aff33d]{width:8rem;color:#fff;background:#2d6ea7;border-bottom-right-radius:4px}.restart[data-v-18aff33d]{position:absolute;left:10%}.file[data-v-18aff33d]{position:absolute;left:20%}","",{version:3,sources:["/Users/mac/git/flask-vue-spa/frontend/src/components/ChatBox.vue"],names:[],mappings:"AACA,2DAEE,oBAAqB,AACrB,oBAAqB,AACrB,aAAc,AACd,4BAA6B,AAC7B,6BAA8B,AAC1B,0BAA2B,AACvB,sBAAuB,AAC/B,oBAAsB,CACvB,AACD,0CACE,gBAAiB,AACjB,sBAAwB,CACzB,AACD,2BACE,UAAW,AACX,YAAa,AACb,sBAAuB,AACvB,kBAAmB,AACnB,gBAAiB,AACjB,yBAA0B,AACtB,sBAAuB,AACnB,6BAA+B,CACxC,AACD,gCACE,gBAAiB,AACjB,kBAAmB,AACnB,mBAAoB,AACpB,eAAiB,CAClB,AACD,mCACE,cAAgB,AAChB,UAAa,CACd,AACD,oCACE,oBAAqB,AACrB,oBAAqB,AACrB,aAAc,AACd,WAAY,AACZ,YAAa,AACb,cAAgB,AAChB,cAAe,AACf,WAAa,CACd,AACD,4CACE,WAAY,AACZ,iBAAkB,AAClB,iBAAmB,CACpB,AACD,4CACE,WAAY,CACb,AACD,4CACE,YAAa,AACb,8BAA8B,AAC9B,8BAA8B,AAC1B,+BAA+B,AAC3B,2BAA2B,AACnC,gBAAiB,AACjB,iBAAmB,CACpB,AACD,4CACE,WAAY,CACb,AACD,8BACE,oBAAqB,AACrB,oBAAqB,AACrB,YAAc,CACf,AACD,oCACE,cAAe,AACf,WAAY,AACZ,sBAAuB,AACvB,iBAAkB,AAClB,mBAAoB,AACpB,kBAAmB,AACnB,8BAA+B,AAC/B,mBAAqB,CACtB,AACD,qCACE,WAAY,AACZ,WAAa,AACb,mBAA8B,AAC9B,8BAAgC,CACjC,AACD,0BACE,kBAAmB,AACnB,QAAU,CACX,AACD,uBACE,kBAAmB,AACnB,QAAU,CACX",file:"ChatBox.vue",sourcesContent:["\n.chat-box[data-v-18aff33d],\n.chat-box-list[data-v-18aff33d] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  list-style-type: none;\n}\n.chat-box-list-container[data-v-18aff33d]{\n  overflow-y: auto;\n  scroll-behavior: smooth;\n}\n.chat-box[data-v-18aff33d] {\n  width: 50%;\n  height: 80vh;\n  border: 1px solid #999;\n  border-radius: 4px;\n  margin-left: 10%;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n}\n.chat-box-list[data-v-18aff33d] {\n  margin-top: 1rem;\n  padding-left: 1rem;\n  padding-right: 1rem;\n  text-align: left;\n}\n.chat-box-list li[data-v-18aff33d] {\n  padding: 0.3rem;\n  color: white;\n}\n.chat-box-list div[data-v-18aff33d] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  width: auto;\n  height :auto;\n  padding: 0.5rem;\n  max-width: 80%;\n  min-width: 0;\n}\n.chat-box-list .server div[data-v-18aff33d]{\n  float: left;\n  background: green;\n  border-radius: 4px;\n}\n.chat-box-list .server img[data-v-18aff33d]{\n  float:right;\n}\n.chat-box-list .client div[data-v-18aff33d]{\n  float: right;\n  -webkit-box-orient:horizontal;\n  -webkit-box-direction:reverse;\n      -ms-flex-direction:row-reverse;\n          flex-direction:row-reverse;\n  background: blue;\n  border-radius: 4px;\n}\n.chat-box-list .client img[data-v-18aff33d]{\n  float:right;\n}\n.chat-inputs[data-v-18aff33d] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n.chat-inputs input[data-v-18aff33d] {\n  line-height: 3;\n  width: 100%;\n  border: 1px solid #999;\n  border-left: none;\n  border-bottom: none;\n  border-right: none;\n  border-bottom-left-radius: 4px;\n  padding-left: 1.5rem;\n}\n.chat-inputs button[data-v-18aff33d] {\n  width: 8rem;\n  color: white;\n  background: rgb(45, 110, 167);\n  border-bottom-right-radius: 4px;\n}\n.restart[data-v-18aff33d] {\n  position: absolute;\n  left: 10%;\n}\n.file[data-v-18aff33d] {\n  position: absolute;\n  left: 20%;\n}\n"],sourceRoot:""}])},ZUpB:function(t,e,a){"use strict";e.a={name:"ChatBox",data:function(){return{message:"",text:"",messages:[],sender_id:"",filename:""}},mounted:function(){this.sender_id=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})}(),console.log("generate sender id: "+this.sender_id)},methods:{sendMessage:function(){var t=this;""!=this.message&&(this.text=this.message,this.message="",this.messages.push({text:this.text,author:"client"}),console.log("client says: "),console.log(this.text),this.$nextTick(function(){t.$refs.chatbox.scrollTop=t.$refs.chatbox.scrollHeight}),this.$axios.post("http://1.117.208.226:5005/webhooks/rest/webhook",{message:this.text,sender:this.sender_id}).then(function(e){t.messages.push({text:e.data[0].text,image:e.data[0].image,author:"server"}),console.log("server says: "),console.log(e.data[0].text),t.$nextTick(function(){t.$refs.chatbox.scrollTop=t.$refs.chatbox.scrollHeight})}))},restart:function(){var t=this;this.$axios.post("http://1.117.208.226:5005/webhooks/rest/webhook",{message:"/restart",sender:"client"}).then(function(e){t.messages=[],t.$nextTick(function(){t.$refs.chatbox.scrollTop=t.$refs.chatbox.scrollHeight,t.sender_id=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})}(),console.log("update sender id: "+t.sender_id)})})},upload:function(t){var e=this,a=t.target.files[0],n=new FormData;n.append("file",a),console.log(n.get("file")),this.$axios.post("http://1.117.208.226:8000/api/upload",n,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){console.log(t.data);var a="http://1.117.208.226:8000/static/images/"+t.data.filename;e.messages.push({image:a,author:"client"}),e.filename=t.data.filename,console.log("client says: upload "),console.log(e.filename),e.$nextTick(function(){e.$refs.chatbox.scrollTop=e.$refs.chatbox.scrollHeight}),e.text="upload_image: "+e.filename,e.$axios.post("http://1.117.208.226:5005/webhooks/rest/webhook",{message:e.text,sender:e.sender_id}).then(function(t){e.messages.push({text:t.data[0].text,image:t.data[0].image,author:"server"}),console.log("server says: "),console.log(t.data[0].text),e.$nextTick(function(){e.$refs.chatbox.scrollTop=e.$refs.chatbox.scrollHeight})})}).catch(function(t){console.log(t)})}}}},kJJa:function(t,e,a){var n=a("OS4I");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("2f16c97c",n,!0,{})},xQW1:function(t,e,a){"use strict";function n(t){a("kJJa")}Object.defineProperty(e,"__esModule",{value:!0});var o=a("ZUpB"),i=a("LQ8+"),s=a("VU/8"),r=n,A=s(o.a,i.a,!1,r,"data-v-18aff33d",null);e.default=A.exports}});
//# sourceMappingURL=1.37900b25d215d1d7617c.js.map